순수 자바 코드로 개발을 진행했지만 다형성 + OCP, DIP를 만족하는 이미 좋은 프로그램인 것 같은데, <br/>
스프링을 왜 사용해야 할까? 스프링을 사용함으로써 얻는 이점은 무엇일까? 

<br/>

### IoC(Inversion of Control), 제어의 역전 

**프로그램의 흐름을 직접 제어하는 것이 아닌 외부에서 제어하는 것!!**

기존 프로그램은 클라이언트 구현 객체가 스스로 필요한 서버 구현 객체를 생성하고, 연결하고, 실행했다. <br/>
한마디로 구현 객체가 프로그램의 제어 흐름을 스스로 조종했다. 개발자 입장에서는 자연스러운 흐름이다.

<br/>

반면에 AppConfig가 등장한 이후에 구현 객체는 자신의 로직을 실행하는 역할만 담당한다. <br/>
프로그램의제어 흐름은 이제 AppConfig가 가져간다. 예를 들어서 OrderServiceImpl 은 필요한 인터페이스들을 <br/>
호출하지만 어떤 구현 객체들이 실행될지 모른다. 

<br/>

AppConfig의 등장으로 클라이언트 구현 객체는 자신의 로직을 실행하는 역할만 담당하고 AppConfig가 그 제어 흐름을 가져갔다. <br/>
이렇듯 **프로그램의 제어 흐름을 직접 제어하는 것이 아니라 외부에서 관리하는 것**을 제어의 역전(IoC)이라 한다.

<br/>

여기서 내가 작성한 코드(ex. AppConfig)가 직접 제어의 흐름을 담당한다면 라이브러리에 속하고 프레임워크가 내가 작성한 코드를 제어하고, <br/>
실행한다면 그것은 프레임워크(ex. JUnit)가 맞다. <br/>
즉, 내가 작성한 코드인 AppConfig가 아닌 스프링 프레임워크가 직접 객체들을 제어해 준다면 보다 편리하게 개발을 진행할 수 있을 것이다.

<br/>

### 의존관계 주입 DI(Dependency Injection)

OrderServiceImpl 은 DiscountPolicy 인터페이스에 의존한다. 실제 어떤 구현 객체가 사용될지는 모른다.<br/>
의존관계는 정적인 클래스 의존 관계와, 실행 시점에 결정되는 동적인 객체(인스턴스) 의존 관계 둘을 분리해서 생각해야 한다.

Inversion of Control 이라고도 하는 의존 관계 주입(Dependency Injection)이라고도 하며, <br/>
**어떤 객체가 사용하는 의존 객체를 직접 만들어 사용하는게 아니라, 주입 받아 사용하는 방법이다**. <br/>
(new 연산자를 이용해서 객체를 생성하는 것이라고 생각하면 된다)

<br/>

- 정적인 클래스 의존관계

클래스가 사용하는 import 코드만 보고 의존관계를 쉽게 판단할 수 있다. <br/>
즉, 눈으로 확인할 수 있는, 애플리케이션을 실행하지 않아도 분석할 수 있는 의존관계를 말한다. 

<br/>

OrderServiceImpl 은 MemberRepository , DiscountPolicy 에 의존한다는 것을 알 수 있다.

그런데 이러한 클래스 의존관계 만으로는 실제 어떤 객체가 OrderServiceImpl 에 주입 될지 알 수 없다.

![image](https://user-images.githubusercontent.com/78454649/148908580-56dace4b-1bdf-40c0-8b0d-8a05adccf530.png)

<br/>

- 동적인 객체 인스턴스 의존 관계

애플리케이션 실행 시점에 실제 생성된 객체 인스턴스의 참조가 연결된 의존 관계다

![image](https://user-images.githubusercontent.com/78454649/148908734-1eaca16e-a2c2-48c4-abd3-ceced757e0f1.png)


애플리케이션 실행 시점(런타임)에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달해서 <br/>
클라이언트와 서버의 실제 의존관계가 연결 되는 것을 **의존관계 주입**이라 한다.


의존관계 주입을 사용하면 클라이언트 코드를 변경하지 않고, 클라이언트가 호출하는 대상의 타입 <br/>
인스턴스를 변경할 수 있다.

의존관계 주입을 사용하면 정적인 클래스 의존관계를 변경하지 않고, 동적인 객체 인스턴스 의존관계를
쉽게 변경할 수 있다

> 다시 말해, 쉽게 변경한다는 것은 정적 의존관계(애플리케션코드)를 바꾸는 것이 아닌 
객체 다이어그램에서 어떤 저장소를 사용할 것인지에 대해 쉽게 변경가능하다는 뜻


### IoC 컨테이너, DI 컨테이너

AppConfig 처럼 객체를 생성하고 관리하면서 의존관계를 연결해 주는 것을 IoC 컨테이너 또는 DI 컨테이너라 한다. (AppConfig가 의존관계 역전을 만들었으니)

아래의 OrderServiceImpl 만들때 누가 의존객체를 주입해주는가 ? AppConfig 가

```java

public OrderService orderService(){
        return new OrderServiceImpl(memberRepositiory(), discountPolicy());
    }

```

의존관계 주입에 초점을 맞추어 최근에는 주로 DI 컨테이너라 한다.

또는 어샘블러, 오브젝트 팩토리 등으로 불리기도 한다


